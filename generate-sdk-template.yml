# File: generate-sdk-template.yml
parameters:
- name: language
  type: string
- name: generateSDK
  type: boolean
  default: false

jobs:
- job: Generate_${{ parameters.language }}
  condition: eq('${{ parameters.generateSDK }}', 'true')
  steps:
  - template: generate-sdk-template.yml
  - template: clone-repo.yml
    env:
      languageName: $(language)
      repoUrl: "docuTest-${{}}-sdk-private"
      targetDirectory: "private-sdks/docuTest-${{}}-sdk-private"
  - script: |
      speakeasy run
    displayName: 'Generate ${{ parameters.language }} SDK'

  - publish: ./sdks/${{ parameters.language }}
    artifact: ${{ parameters.language }}-sdk
    displayName: 'Publish ${{ parameters.language }} SDK as artifact'
